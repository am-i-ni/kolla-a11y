javascript:(function(){const ka_prefix="kolla-a11y";const ka_toolbarId=`${ka_prefix}-toolbar`;const ka_styleId=`${ka_prefix}-styles`;const ka_outputId=`${ka_prefix}-output`;let ka_currentActiveTool=null;let ka_isCssToggledOff=!1;let ka_headingCheckData=[];let ka_headingCheckFilter="all";const ka_AMBIGUOUS_LINK_TEXT={en:["click here","learn more","read more","more","link","here","info","details","continue"],sv:["klicka här","läs mer","mer","länk","här","info","detaljer","fortsätt"]};const ka_SKIP_LINK_TEXT={en:["skip to content","skip to main content","skip navigation","skip to main"],sv:["hoppa till innehåll","hoppa till huvudinnehåll","hoppa över navigering","hoppa över meny","till innehållet"]};const ka_IMAGE_HIGHLIGHT_CLASSES=[`${ka_prefix}-highlight-image-alt-present`,`${ka_prefix}-highlight-image-alt-empty`,`${ka_prefix}-highlight-image-alt-missing`,`${ka_prefix}-highlight-svg-named`,`${ka_prefix}-highlight-svg-decorative`,`${ka_prefix}-highlight-svg-missing`,`${ka_prefix}-highlight-svg-unclear`,`${ka_prefix}-highlight-svg-hidden`];const ka_cleanupLandmarks=()=>{console.log("Kolla A11y: Removing Landmark Highlights & Panel");document.querySelectorAll(`.${ka_prefix}-highlight-landmark`).forEach(ka_el=>{ka_el.classList.remove(`${ka_prefix}-highlight-landmark`);ka_el.style.removeProperty(`--${ka_prefix}-landmark-role`)});const ka_panel=document.getElementById(ka_outputId);if(ka_panel){ka_panel.remove()}};const ka_cleanupLinks=()=>{console.log("Kolla A11y: Removing Link Highlights & Panel");document.querySelectorAll(`.${ka_prefix}-highlight-link, .${ka_prefix}-highlight-link-issue`).forEach(ka_el=>{ka_el.classList.remove(`${ka_prefix}-highlight-link`);ka_el.classList.remove(`${ka_prefix}-highlight-link-issue`);ka_el.style.removeProperty(`--${ka_prefix}-link-status`)});const ka_panel=document.getElementById(ka_outputId);if(ka_panel){ka_panel.remove()}};const ka_cleanupFocusable=()=>console.log("Cleanup: Focusable");const ka_runLandmarksCheck=()=>{console.log("Kolla A11y: Running Landmarks Check...");ka_cleanupLandmarks();const ka_selector="header:not(section header, article header, aside header, nav header, main header),footer:not(section footer, article footer, aside footer, nav footer, main footer),main, nav, aside,[role=\"banner\"], [role=\"navigation\"], [role=\"main\"], [role=\"complementary\"],[role=\"contentinfo\"], [role=\"search\"], form[aria-label], form[aria-labelledby],[role=\"form\"][aria-label], [role=\"form\"][aria-labelledby],[role=\"region\"][aria-label], [role=\"region\"][aria-labelledby]";const ka_landmarks=Array.from(document.querySelectorAll(ka_selector));const ka_outputItems=[];let ka_hasMain=!1;ka_landmarks.forEach((ka_landmark,ka_index)=>{if(ka_landmark.closest(`#${ka_toolbarId}`)||ka_landmark.closest(`#${ka_outputId}`))return;const ka_targetId=`${ka_prefix}-landmark-${ka_index}`;ka_landmark.setAttribute("data-kolla-a11y-id",ka_targetId);ka_landmark.classList.add(`${ka_prefix}-highlight-landmark`);const ka_tagName=ka_landmark.tagName.toLowerCase();const ka_explicitRole=ka_landmark.getAttribute("role");let ka_effectiveRole=ka_explicitRole;let ka_roleSource="role";if(!ka_explicitRole){if("header"===ka_tagName&&!ka_landmark.closest("section, article, aside, nav, main"))ka_effectiveRole="banner";else if("footer"===ka_tagName&&!ka_landmark.closest("section, article, aside, nav, main"))ka_effectiveRole="contentinfo";else if("main"===ka_tagName)ka_effectiveRole="main";else if("nav"===ka_tagName)ka_effectiveRole="navigation";else if("aside"===ka_tagName)ka_effectiveRole="complementary";else if("form"===ka_tagName)ka_effectiveRole="form";if(ka_effectiveRole&&!ka_explicitRole)ka_roleSource="tag"}if("section"===ka_tagName&&ka_getAccessibleName(ka_landmark)){ka_effectiveRole="region";ka_roleSource="tag"}if("search"===ka_effectiveRole&&"form"===ka_tagName&&"role"===ka_roleSource){ka_roleSource="form[role=search]"}if(!ka_effectiveRole)return;const ka_accessibleName=ka_getAccessibleName(ka_landmark);let ka_issues=[];if(("region"===ka_effectiveRole||"form"===ka_effectiveRole)&&!ka_accessibleName){ka_issues.push(`Landmark role "${ka_effectiveRole}" requires an accessible name (aria-label or aria-labelledby).`)}"main"===ka_effectiveRole&&(ka_hasMain=!0);const ka_overlayText=ka_effectiveRole.toUpperCase();ka_landmark.style.setProperty(`--${ka_prefix}-landmark-role`,`'${ka_overlayText}'`);ka_outputItems.push({targetId:ka_targetId,role:ka_effectiveRole,roleSource:ka_roleSource,elementTag:`<${ka_tagName}>`,name:ka_accessibleName,issues:ka_issues})});const ka_panelCloseBtnId=`${ka_outputId}-close-btn`;let ka_panelHtml=`<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;"><h3 id="${ka_prefix}-panel-title" style="margin: 0;">Landmarks</h3><button id="${ka_panelCloseBtnId}" aria-label="Close Landmarks Panel" class="${ka_prefix}-panel-close-btn">×</button></div>`;ka_hasMain||(ka_panelHtml+=`<div class="${ka_prefix}-landmark-warning">⚠️ Warning: No main landmark (<main> or role="main") found.</div>`);ka_panelHtml+=`<div id="${ka_prefix}-list-container">`;if(ka_outputItems.length===0){ka_panelHtml+='<p>No landmarks found on this page.</p>'}else{ka_panelHtml+=`<div class="${ka_prefix}-info-header">Found: ${ka_outputItems.length} landmarks.</div>`;ka_outputItems.forEach(ka_item=>{const ka_errorClass=ka_item.issues.length>0?` ${ka_prefix}-heading-error`:"";ka_panelHtml+=`<div class="${ka_prefix}-landmark-item${ka_errorClass}">`;ka_panelHtml+=`<strong class="${ka_prefix}-landmark-role" data-target-id="${ka_item.targetId}" title="Click to scroll to element" style="cursor:pointer;">${ka_item.role}</strong>`;if(ka_item.name){ka_panelHtml+=`<div class="${ka_prefix}-landmark-name">Name: ${ka_item.name}</div>`}else if("region"===ka_item.role||"form"===ka_item.role){ka_panelHtml+=`<div class="${ka_prefix}-landmark-name ${ka_prefix}-issue">[Requires Name]</div>`}else{ka_panelHtml+=`<div class="${ka_prefix}-landmark-name">[No explicit name]</div>`}ka_panelHtml+=`<div class="${ka_prefix}-landmark-element">Element: ${ka_item.elementTag} ${"role"===ka_item.roleSource?`(role="${ka_item.role}")`:"(Implicit from tag)"}</div>`;if(ka_item.issues.length>0){ka_panelHtml+=`<div class="${ka_prefix}-issue">Issue: ${ka_item.issues.join("; ")}</div>`}ka_panelHtml+=`</div>`})}ka_panelHtml+=`</div>`;const ka_panelElement=document.createElement("div");ka_panelElement.id=ka_outputId;ka_panelElement.innerHTML=ka_panelHtml;document.body.appendChild(ka_panelElement);ka_panelElement.addEventListener("click",ka_event=>{const ka_targetId=ka_event.target.closest("[data-target-id]")?.dataset.targetId;if(ka_targetId){ka_event.preventDefault();const ka_targetElement=document.querySelector(`[data-kolla-a11y-id="${ka_targetId}"]`);if(ka_targetElement){ka_targetElement.setAttribute("tabindex","-1");ka_targetElement.focus({preventScroll:!0});ka_targetElement.removeAttribute("tabindex");ka_targetElement.scrollIntoView({behavior:"smooth",block:"center"})}return}const ka_closeButton=ka_event.target.closest(`.${ka_prefix}-panel-close-btn`);if(ka_closeButton){ka_event.preventDefault();ka_cleanupLandmarks();const ka_landmarkToolButton=document.querySelector(`#${ka_toolbarId} button[data-tool="landmarks"]`);if(ka_landmarkToolButton)ka_landmarkToolButton.setAttribute("aria-pressed","false");ka_currentActiveTool=null}})} ;const ka_runLinksCheck=()=>{console.log("Kolla A11y: Running Links Check...");ka_cleanupLinks();let ka_pageLang=document.documentElement.lang||"en";ka_pageLang=ka_pageLang.split("-")[0].toLowerCase();const ka_skipLinkInfo=ka_getSkipLinkStatus(ka_pageLang);const ka_ambiguousPhrases=ka_AMBIGUOUS_LINK_TEXT[ka_pageLang]||ka_AMBIGUOUS_LINK_TEXT.en;const ka_links=Array.from(document.querySelectorAll("a"));const ka_outputItems=[];let ka_linkCount=0;let ka_issueCount=0;ka_links.forEach((ka_link,ka_index)=>{if(ka_link.closest(`#${ka_toolbarId}`)||ka_link.closest(`#${ka_outputId}`))return;const ka_targetId=`${ka_prefix}-link-${ka_index}`;ka_link.setAttribute("data-kolla-a11y-id",ka_targetId);const ka_href=ka_link.getAttribute("href");const ka_linkText=ka_getAccessibleLinkText(ka_link);const ka_linkTextLower=ka_linkText.toLowerCase();let ka_issues=[];let ka_statusText="LINK";let ka_highlightClass=`${ka_prefix}-highlight-link`;if(ka_href){if(ka_href.trim()===""){ka_issues.push("Empty href attribute.");ka_statusText='HREF=""'}else if(ka_href.trim()==="#"){ka_issues.push('Placeholder href="#" used.');ka_statusText='HREF="#"'}}else{ka_issues.push("Missing href attribute.");ka_statusText="NO HREF"}if(ka_linkText==="[Empty or non-text content]"){if(ka_href){ka_issues.push("Link has no discernible text content.");ka_statusText="EMPTY"}else return}else if(ka_linkText==="[Image missing alt]"||ka_linkText==="[SVG role=img missing name]"){ka_issues.push("Link contains image/SVG with missing accessible name.");ka_statusText="NO IMG/SVG NAME"}else if(ka_ambiguousPhrases.includes(ka_linkTextLower)){ka_issues.push(`Ambiguous link text: "${ka_linkText}".`);ka_statusText="AMBIGUOUS"}if(ka_link.getAttribute("target")==="_blank"){ka_issues.push('Opens in new window (target="_blank"). Verify warning.');ka_statusText==="LINK"&&(ka_statusText="NEW WINDOW")}if(ka_issues.length>0){ka_highlightClass=`${ka_prefix}-highlight-link-issue`;ka_issueCount++}ka_link.classList.add(ka_highlightClass);ka_link.style.setProperty(`--${ka_prefix}-link-status`,`'${ka_statusText}'`);ka_linkCount++;ka_outputItems.push({targetId:ka_targetId,href:ka_href||"[None]",text:ka_linkText,issues:ka_issues})});const ka_panelCloseBtnId=`${ka_outputId}-close-btn`;let ka_panelHtml=`<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;"><h3 id="${ka_prefix}-panel-title" style="margin: 0;">Links Analysis</h3><button id="${ka_panelCloseBtnId}" aria-label="Close Links Panel" class="${ka_prefix}-panel-close-btn">×</button></div>`;ka_panelHtml+=`<div class="${ka_prefix}-skip-link-info"><strong>Skip Link Check:</strong> <span class="${ka_skipLinkInfo.found&&!ka_skipLinkInfo.targetExists?ka_prefix+"-issue":""}">${ka_skipLinkInfo.message}</span></div>`;ka_panelHtml+=`<div class="${ka_prefix}-info-header">Found: ${ka_linkCount} links. Issues detected: ${ka_issueCount}.</div>`;ka_panelHtml+=`<div id="${ka_prefix}-list-container">`;if(ka_outputItems.length===0){ka_panelHtml+='<p>No links found on this page.</p>'}else{ka_outputItems.forEach(ka_item=>{const ka_errorClass=ka_item.issues.length>0?` ${ka_prefix}-heading-error`:"";ka_panelHtml+=`<div class="${ka_prefix}-link-item${ka_errorClass}">`;ka_panelHtml+=`<a href="#" class="${ka_prefix}-link-text" data-target-id="${ka_item.targetId}">${ka_item.text}</a>`;ka_panelHtml+=`<div class="${ka_prefix}-link-href">Href: ${ka_item.href}</div>`;if(ka_item.issues.length>0){ka_panelHtml+=`<div class="${ka_prefix}-issue">Issues: ${ka_item.issues.join("; ")}</div>`}ka_panelHtml+=`</div>`})}ka_panelHtml+=`</div>`;const ka_panelElement=document.createElement("div");ka_panelElement.id=ka_outputId;ka_panelElement.innerHTML=ka_panelHtml;document.body.appendChild(ka_panelElement);ka_panelElement.addEventListener("click",ka_event=>{const ka_targetId=ka_event.target.closest("[data-target-id]")?.dataset.targetId;if(ka_targetId){ka_event.preventDefault();const ka_targetElement=document.querySelector(`[data-kolla-a11y-id="${ka_targetId}"]`);if(ka_targetElement){ka_targetElement.setAttribute("tabindex","-1");ka_targetElement.focus({preventScroll:!0});ka_targetElement.removeAttribute("tabindex");ka_targetElement.scrollIntoView({behavior:"smooth",block:"center"})}return}const ka_closeButton=ka_event.target.closest(`.${ka_prefix}-panel-close-btn`);if(ka_closeButton){ka_event.preventDefault();ka_cleanupLinks();const ka_linkToolButton=document.querySelector(`#${ka_toolbarId} button[data-tool="links"]`);if(ka_linkToolButton)ka_linkToolButton.setAttribute("aria-pressed","false");ka_currentActiveTool=null}})} ;const ka_runFocusableCheck=()=>console.log("Run Focusable Check...");function ka_cleanupAll(){console.log("Kolla A11y: Cleaning up all elements...");const ka_toolbar=document.getElementById(ka_toolbarId);const ka_styles=document.getElementById(ka_styleId);const ka_outputPanel=document.getElementById(ka_outputId);ka_toolbar&&ka_toolbar.remove();ka_styles&&ka_styles.remove();ka_outputPanel&&ka_outputPanel.remove();if(ka_isCssToggledOff){console.log("Kolla A11y: Cleanup ensuring CSS is ON");ka_toggleAllStylesheets(!0);ka_isCssToggledOff=!1}ka_deactivateTool(null,!0);ka_headingCheckData=[]}function ka_cleanupHeadings(){console.log("Kolla A11y: Removing Heading Highlights & Panel");document.querySelectorAll(`.${ka_prefix}-highlight-heading`).forEach(ka_el=>{ka_el.classList.remove(`${ka_prefix}-highlight-heading`);ka_el.style.removeProperty(`--${ka_prefix}-heading-level`)});const ka_panel=document.getElementById(ka_outputId);if(ka_panel){ka_panel.remove()};ka_headingCheckData=[]}function ka_cleanupImages(){console.log("Kolla A11y: Removing Image Info & Highlights");document.querySelectorAll(`img.${ka_prefix}-highlight-image, svg.${ka_prefix}-highlight-svg`).forEach(ka_el=>{ka_el.classList.remove(`${ka_prefix}-highlight-image`);ka_el.classList.remove(`${ka_prefix}-highlight-svg`);ka_el.style.removeProperty(`--${ka_prefix}-img-status`);ka_IMAGE_HIGHLIGHT_CLASSES.forEach(ka_cls=>ka_el.classList.remove(ka_cls))});const ka_panel=document.getElementById(ka_outputId);if(ka_panel){ka_panel.remove()}}function ka_deactivateTool(ka_toolToPreserve=null,ka_forceCleanup=!1){const ka_previouslyActiveTool=ka_currentActiveTool;if(!ka_previouslyActiveTool&&!ka_forceCleanup)return;console.log(`Kolla A11y: Deactivating visual tool: ${ka_previouslyActiveTool}, Preserving: ${ka_toolToPreserve}, Force: ${ka_forceCleanup}`);if(ka_previouslyActiveTool&&(ka_forceCleanup||ka_previouslyActiveTool!==ka_toolToPreserve)){console.log(`Kolla A11y: Running cleanup actions for ${ka_previouslyActiveTool}`);switch(ka_previouslyActiveTool){case"headings":ka_cleanupHeadings();break;case"landmarks":ka_cleanupLandmarks();break;case"images":ka_cleanupImages();break;case"links":ka_cleanupLinks();break;case"focusable":ka_cleanupFocusable();break}if(ka_previouslyActiveTool!=="togglecss"){const ka_previousButton=document.querySelector(`#${ka_toolbarId} button[data-tool="${ka_previouslyActiveTool}"]`);if(ka_previousButton){ka_previousButton.setAttribute("aria-pressed","false")}}}if(ka_forceCleanup){console.log("Kolla A11y: Force cleanup invoked.");if(ka_isCssToggledOff){console.log("Kolla A11y: Force cleanup re-enabling CSS.");ka_toggleAllStylesheets(!0);ka_isCssToggledOff=!1;const ka_toggleCssButton=document.querySelector(`#${ka_toolbarId} button[data-tool="togglecss"]`);if(ka_toggleCssButton){ka_toggleCssButton.setAttribute("aria-pressed","false")}}ka_currentActiveTool=null}else{ka_currentActiveTool=(ka_toolToPreserve!=="togglecss")?ka_toolToPreserve:null}console.log(`Kolla A11y: Deactivation finished. Current active tool state: ${ka_currentActiveTool}`)}function ka_getElementVisibility(ka_element){try{const ka_styles=window.getComputedStyle(ka_element);if(ka_styles.display==="none"||ka_styles.visibility==="hidden"||ka_element.closest('[aria-hidden="true"]')||ka_element.hidden)return"hidden";const ka_rect=ka_element.getBoundingClientRect();if((ka_rect.width===0||ka_rect.height===0)&&ka_styles.overflow!=="hidden"&&ka_styles.position==="absolute")return"visually-hidden";if((ka_rect.width===0||ka_rect.height===0)&&ka_styles.clip==="rect(0px, 0px, 0px, 0px)")return"visually-hidden";if(ka_rect.width===0||ka_rect.height===0)return"visually-hidden"}catch(ka_e){console.warn("Kolla A11y: Error checking visibility",ka_element,ka_e);return"hidden"}return"visible"}function ka_renderHeadingsList(ka_data,ka_filter){let ka_listHtml=`<ul aria-labelledby="${ka_prefix}-headings-list-title">`;let ka_visibleCount=0;let ka_h1Count=0;ka_data.forEach(ka_heading=>{const ka_visibility=ka_heading.visibility;let ka_shouldDisplay=!1;switch(ka_filter){case"visible":ka_shouldDisplay=(ka_visibility==="visible");break;case"hidden":ka_shouldDisplay=(ka_visibility==="hidden"||ka_visibility==="visually-hidden");break;default:ka_shouldDisplay=!0}if(ka_shouldDisplay){const ka_errorClass=ka_heading.issues.length>0?` ${ka_prefix}-heading-error`:"";let ka_listItem=`<li style="--level: ${ka_heading.level};" class="${ka_errorClass.trim()}">`;ka_listItem+=`<span class="kolla-a11y-heading-level">H${ka_heading.level}:</span> `;ka_listItem+=`<a href="#" class="kolla-a11y-heading-text" data-target-id="${ka_heading.targetId}">${ka_heading.text||"[Empty]"}</a>`;if(ka_heading.issues.length>0){ka_listItem+=` <span class="kolla-a11y-issue">(${ka_heading.issues.join(", ")})</span>`}if(ka_visibility==="visually-hidden"||ka_visibility==="hidden"){ka_listItem+=` <span class="kolla-a11y-hidden-info">[${ka_visibility.replace("-"," ")}]</span>`}ka_listItem+="</li>";ka_listHtml+=ka_listItem;ka_visibleCount++}if(ka_heading.level===1){ka_h1Count++}});ka_listHtml+="</ul>";if(ka_visibleCount===0&&ka_filter!=="all"){ka_listHtml+=`<p>No headings match the filter: "${ka_filter}".</p>`}if(ka_h1Count===0&&ka_filter!=="hidden"){ka_listHtml+=`<p class="${ka_prefix}-issue" style="margin-top: 10px;">Warning: No H1 heading found${ka_visibleCount>0?" among matching headings":""}.</p>`}return ka_listHtml}function ka_runHeadingsCheck(){console.log("Kolla A11y: Running Headings Check...");ka_cleanupHeadings();ka_headingCheckData=[];const ka_headings=Array.from(document.querySelectorAll("h1, h2, h3, h4, h5, h6"));let ka_previousLevel=0;let ka_h1TotalCount=0;ka_headings.forEach((ka_heading,ka_index)=>{if(ka_heading.closest(`#${ka_toolbarId}`)||ka_heading.closest(`#${ka_outputId}`))return;const ka_level=parseInt(ka_heading.tagName.substring(1),10);ka_heading.style.setProperty(`--${ka_prefix}-heading-level`,`"H${ka_level}"`);const ka_text=(ka_heading.textContent||"").trim();const ka_targetId=`${ka_prefix}-heading-${ka_index}`;ka_heading.setAttribute("data-kolla-a11y-id",ka_targetId);ka_heading.classList.add(`${ka_prefix}-highlight-heading`);let ka_issues=[];if(ka_level===1){ka_h1TotalCount++;if(ka_h1TotalCount>1){ka_issues.push("Multiple H1")}}else if(ka_index>0&&ka_level>ka_previousLevel+1){if(ka_previousLevel>0){ka_issues.push(`Skipped level (previous was H${ka_previousLevel}`)}}if(ka_text===""){ka_issues.push("Empty Heading")}const ka_visibility=ka_getElementVisibility(ka_heading);ka_headingCheckData.push({level:ka_level,text:ka_text,targetId:ka_targetId,issues:ka_issues,visibility:ka_visibility});if(ka_visibility!=="hidden"){ka_previousLevel=ka_level}});const ka_panelCloseBtnId=`${ka_outputId}-close-btn`;const ka_listContainerId=`${ka_prefix}-headings-list-container`;const ka_listTitleId=`${ka_prefix}-headings-list-title`;let ka_panelHtml=`<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;"><h3 id="${ka_prefix}-panel-title" style="margin: 0;">Headings Outline</h3><button id="${ka_panelCloseBtnId}" aria-label="Close Headings Outline Panel" class="${ka_prefix}-panel-close-btn">×</button></div>`;ka_panelHtml+=`<fieldset class="${ka_prefix}-filter-group"><legend class="${ka_prefix}-visually-hidden">Filter headings by visibility</legend><label><input type="radio" name="${ka_prefix}-heading-filter" value="all" ${ka_headingCheckFilter==="all"?"checked":""}> All</label><label><input type="radio" name="${ka_prefix}-heading-filter" value="visible" ${ka_headingCheckFilter==="visible"?"checked":""}> Visible Only</label><label><input type="radio" name="${ka_prefix}-heading-filter" value="hidden" ${ka_headingCheckFilter==="hidden"?"checked":""}> Hidden Only</label></fieldset>`;ka_panelHtml+=`<h4 id="${ka_listTitleId}" class="${ka_prefix}-visually-hidden">List of page headings with structure analysis</h4>`;ka_panelHtml+=`<div id="${ka_listContainerId}"></div>`;const ka_panelElement=document.createElement("div");ka_panelElement.id=ka_outputId;ka_panelElement.innerHTML=ka_panelHtml;document.body.appendChild(ka_panelElement);const ka_listContainer=document.getElementById(ka_listContainerId);ka_listContainer.innerHTML=ka_renderHeadingsList(ka_headingCheckData,ka_headingCheckFilter);ka_panelElement.addEventListener("click",ka_event=>{const ka_headingLink=ka_event.target.closest(".kolla-a11y-heading-text");if(ka_headingLink&&ka_headingLink.dataset.targetId){ka_event.preventDefault();const ka_targetElement=document.querySelector(`[data-kolla-a11y-id="${ka_headingLink.dataset.targetId}"]`);if(ka_targetElement){ka_targetElement.setAttribute("tabindex","-1");ka_targetElement.focus({preventScroll:!0});ka_targetElement.removeAttribute("tabindex");ka_targetElement.scrollIntoView({behavior:"smooth",block:"center"})}return}const ka_closeButton=ka_event.target.closest(`.${ka_prefix}-panel-close-btn`);if(ka_closeButton){ka_event.preventDefault();ka_cleanupHeadings();const ka_headingToolButton=document.querySelector(`#${ka_toolbarId} button[data-tool="headings"]`);if(ka_headingToolButton)ka_headingToolButton.setAttribute("aria-pressed","false");ka_currentActiveTool=null;return}if(ka_event.target.type==="radio"&&ka_event.target.name===`${ka_prefix}-heading-filter`){ka_headingCheckFilter=ka_event.target.value;console.log("Kolla A11y: Filter changed to",ka_headingCheckFilter);ka_listContainer.innerHTML=ka_renderHeadingsList(ka_headingCheckData,ka_headingCheckFilter)}})}function ka_getSvgAccessibleName(ka_svgElement){if(ka_svgElement.getAttribute("aria-hidden")==="true")return{name:"[Hidden by aria-hidden]",type:"hidden",statusClass:"hidden",statusText:"HIDDEN"};if(ka_svgElement.getAttribute("role")==="presentation")return{name:"[Marked as decorative]",type:"decorative",statusClass:"decorative",statusText:"DECO"};const ka_label=ka_svgElement.getAttribute("aria-label");if(ka_label)return{name:ka_label,type:"aria-label",statusClass:"named",statusText:"NAME"};const ka_labelledby=ka_svgElement.getAttribute("aria-labelledby");if(ka_labelledby){try{const ka_labelElement=document.getElementById(ka_labelledby);if(ka_labelElement)return{name:(ka_labelElement.textContent||"").trim(),type:"aria-labelledby",statusClass:"named",statusText:"NAME"}}catch(ka_e){console.warn("Kolla A11y: Error finding labelledby element",ka_labelledby,ka_e)}}const ka_titleElement=ka_svgElement.querySelector(":scope > title");if(ka_titleElement)return{name:(ka_titleElement.textContent||"").trim(),type:"title",statusClass:"named",statusText:"NAME"};if(ka_svgElement.getAttribute("role")==="img")return{name:null,type:"missing",statusClass:"missing",statusText:"NO NAME"};return{name:"[No explicit name or role=\"img\"]",type:"unclear",statusClass:"unclear",statusText:"???"}}function ka_runImagesCheck(){console.log("Kolla A11y: Running Images Check...");ka_cleanupImages();const ka_images=Array.from(document.querySelectorAll("img")),ka_svgs=Array.from(document.querySelectorAll("svg")),ka_outputItems=[];let ka_imgCount=0,ka_svgCount=0,ka_missingAltCount=0,ka_emptyAltCount=0,ka_missingSvgNameCount=0;ka_images.forEach((ka_img,ka_index)=>{if(ka_img.closest(`#${ka_toolbarId}`)||ka_img.closest(`#${ka_outputId}`))return;ka_imgCount++;const ka_targetId=`${ka_prefix}-image-${ka_index}`;ka_img.setAttribute("data-kolla-a11y-id",ka_targetId);ka_img.classList.add(`${ka_prefix}-highlight-image`);const ka_src=ka_img.getAttribute("src")||"[No src]";let ka_altText="",ka_altState="present",ka_issueMsg=null,ka_statusClass="",ka_statusText="";if(ka_img.hasAttribute("alt")){ka_altText=ka_img.getAttribute("alt");if(ka_altText.trim()===""){ka_altState="empty";ka_altText="[Empty alt]";ka_emptyAltCount++;ka_statusClass=`${ka_prefix}-highlight-image-alt-empty`;ka_statusText='ALT=""'}else{ka_altState="present";ka_statusClass=`${ka_prefix}-highlight-image-alt-present`;ka_statusText="ALT"}}else{ka_altState="missing";ka_altText="[Missing alt!]";ka_issueMsg="Missing alt attribute!";ka_missingAltCount++;ka_statusClass=`${ka_prefix}-highlight-image-alt-missing`;ka_statusText="NO ALT"}ka_img.classList.add(ka_statusClass);ka_img.style.setProperty(`--${ka_prefix}-img-status`,`'${ka_statusText}'`);ka_outputItems.push({type:"img",targetId:ka_targetId,src:ka_src,altText:ka_altText,altState:ka_altState,issue:ka_issueMsg})});ka_svgs.forEach((ka_svg,ka_index)=>{if(ka_svg.closest(`#${ka_toolbarId}`)||ka_svg.closest(`#${ka_outputId}`))return;const ka_rect=ka_svg.getBoundingClientRect();if(ka_rect.width<5&&ka_rect.height<5&&!ka_svg.hasAttribute("role"))return;ka_svgCount++;const ka_targetId=`${ka_prefix}-svg-${ka_index}`;ka_svg.setAttribute("data-kolla-a11y-id",ka_targetId);ka_svg.classList.add(`${ka_prefix}-highlight-svg`);const ka_accessibleInfo=ka_getSvgAccessibleName(ka_svg);let ka_issueMsg=null;if(ka_accessibleInfo.type==="missing"){ka_issueMsg='SVG has role="img" but no accessible name found!';ka_missingSvgNameCount++}else if(ka_accessibleInfo.type==="unclear"){ka_issueMsg="SVG has no explicit role or name. Verify purpose."}ka_svg.classList.add(`${ka_prefix}-highlight-svg-${ka_accessibleInfo.statusClass}`);ka_svg.style.setProperty(`--${ka_prefix}-img-status`,`'${ka_accessibleInfo.statusText}'`);ka_outputItems.push({type:"svg",targetId:ka_targetId,altText:ka_accessibleInfo.name,altState:ka_accessibleInfo.type,issue:ka_issueMsg})});const ka_panelCloseBtnId=`${ka_outputId}-close-btn`;let ka_panelHtml=`<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;"><h3 id="${ka_prefix}-panel-title" style="margin: 0;">Images & SVGs</h3><button id="${ka_panelCloseBtnId}" aria-label="Close Images Panel" class="${ka_prefix}-panel-close-btn">×</button></div>`;ka_panelHtml+=`<div class="${ka_prefix}-info-header">Found: ${ka_imgCount} img, ${ka_svgCount} relevant svg. Issues: ${ka_missingAltCount} missing alt, ${ka_emptyAltCount} empty alt, ${ka_missingSvgNameCount} SVG name missing.</div>`;ka_panelHtml+=`<div id="${ka_prefix}-list-container">`;if(ka_outputItems.length===0){ka_panelHtml+='<p>No relevant images or SVGs found on this page.</p>'}else{ka_outputItems.forEach(ka_item=>{ka_panelHtml+=`<div class="kolla-a11y-image-item">`;ka_panelHtml+=`<div class="kolla-a11y-image-preview" data-target-id="${ka_item.targetId}" title="Click to scroll to element">`;if(ka_item.type==="img"){if(ka_item.src==="[No src]"){ka_panelHtml+=`<span class="${ka_prefix}-no-src-preview">[No src]</span>`}else{ka_panelHtml+=`<img src="${ka_item.src}" alt="Preview" loading="lazy">`}}else{try{const ka_svgElement=document.querySelector(`[data-kolla-a11y-id="${ka_item.targetId}"]`);if(ka_svgElement){const ka_clone=ka_svgElement.cloneNode(!0);ka_clone.removeAttribute("width");ka_clone.removeAttribute("height");ka_clone.removeAttribute("style");ka_clone.removeAttribute("class");ka_panelHtml+=ka_clone.outerHTML}else{ka_panelHtml+="SVG"}}catch(ka_e){console.warn("Kolla A11y: Error cloning SVG for preview",ka_item.targetId,ka_e);ka_panelHtml+="SVG"}}ka_panelHtml+=`</div>`;ka_panelHtml+=`<div class="kolla-a11y-image-info">`;if(ka_item.type==="img"){ka_panelHtml+=`<strong>Alt Text:</strong>`;ka_panelHtml+=`<div class="kolla-a11y-image-alt ${ka_item.altState==="missing"||ka_item.altState==="empty"?ka_prefix+"-heading-error":""}">${ka_item.altText}</div>`;ka_panelHtml+=`<div class="kolla-a11y-image-src">Src: ${ka_item.src}</div>`}else{ka_panelHtml+=`<strong>Accessible Name (${ka_item.altState}):</strong>`;ka_panelHtml+=`<div class="kolla-a11y-svg-name ${ka_item.altState==="missing"||ka_item.altState==="unclear"?ka_prefix+"-heading-error":""}">${ka_item.altText||"[None]"}</div>`}if(ka_item.issue){ka_panelHtml+=`<div class="kolla-a11y-issue">(${ka_item.issue})</div>`}ka_panelHtml+=`</div>`;ka_panelHtml+=`</div>`})}ka_panelHtml+=`</div>`;const ka_panelElement=document.createElement("div");ka_panelElement.id=ka_outputId;ka_panelElement.innerHTML=ka_panelHtml;document.body.appendChild(ka_panelElement);ka_panelElement.addEventListener("click",ka_event=>{const ka_targetId=ka_event.target.closest("[data-target-id]")?.dataset.targetId;if(ka_targetId){ka_event.preventDefault();const ka_targetElement=document.querySelector(`[data-kolla-a11y-id="${ka_targetId}"]`);if(ka_targetElement){ka_targetElement.setAttribute("tabindex","-1");ka_targetElement.focus({preventScroll:!0});ka_targetElement.removeAttribute("tabindex");ka_targetElement.scrollIntoView({behavior:"smooth",block:"center"})}return}const ka_closeButton=ka_event.target.closest(`.${ka_prefix}-panel-close-btn`);if(ka_closeButton){ka_event.preventDefault();ka_cleanupImages();const ka_imageToolButton=document.querySelector(`#${ka_toolbarId} button[data-tool="images"]`);if(ka_imageToolButton)ka_imageToolButton.setAttribute("aria-pressed","false");ka_currentActiveTool=null}})}function ka_getAccessibleName(ka_element){const ka_labelledby=ka_element.getAttribute("aria-labelledby");if(ka_labelledby){const ka_ids=ka_labelledby.split(/\s+/).filter(Boolean);let ka_name="";return ka_ids.forEach(ka_id=>{try{const ka_labelElement=document.getElementById(ka_id);if(ka_labelElement)ka_name+=(ka_labelElement.textContent||"").trim()+" "}catch(ka_e){console.warn("Kolla A11y: Error finding labelledby ID:",ka_id,ka_e)}}),ka_name=ka_name.trim(),ka_name?ka_name:null}const ka_label=ka_element.getAttribute("aria-label");if(ka_label&&ka_label.trim())return ka_label.trim();const ka_titleAttr=ka_element.getAttribute("title");if(ka_titleAttr&&ka_titleAttr.trim())return ka_titleAttr.trim();const ka_role=ka_element.getAttribute("role");const ka_tagName=ka_element.tagName.toLowerCase();if("banner"===ka_role||"header"===ka_tagName&&!ka_element.closest("section, article, aside, nav, main"))return"Banner";if("contentinfo"===ka_role||"footer"===ka_tagName&&!ka_element.closest("section, article, aside, nav, main"))return"Content Information";if("main"===ka_role||"main"===ka_tagName)return"Main Content";if(("form"===ka_role||"form"===ka_tagName)&&!ka_label&&!ka_labelledby){const ka_legend=ka_element.querySelector("legend");if(ka_legend)return(ka_legend.textContent||"").trim()}return null}function ka_getAccessibleLinkText(ka_linkElement){const ka_labelledby=ka_linkElement.getAttribute("aria-labelledby");if(ka_labelledby){try{const ka_labelElement=document.getElementById(ka_labelledby);if(ka_labelElement)return(ka_labelElement.textContent||"").trim()}catch(ka_e){console.warn("Kolla A11y: Error finding labelledby for link",ka_labelledby,ka_e)}}const ka_label=ka_linkElement.getAttribute("aria-label");if(ka_label)return ka_label.trim();let ka_textContent="";Array.from(ka_linkElement.childNodes).forEach(ka_node=>{if(ka_node.nodeType===Node.TEXT_NODE)ka_textContent+=ka_node.textContent;else if(ka_node.nodeType===Node.ELEMENT_NODE){const ka_style=window.getComputedStyle(ka_node);ka_style.display!=="none"&&ka_style.visibility!=="hidden"&&!ka_node.closest('[aria-hidden="true"]')&&(ka_textContent+=ka_node.textContent)}});ka_textContent=ka_textContent.replace(/\s+/g," ").trim();if(ka_textContent)return ka_textContent;const ka_img=ka_linkElement.querySelector(":scope > img");if(ka_img&&ka_img.hasAttribute("alt")){const ka_alt=ka_img.getAttribute("alt").trim();return ka_alt||"[Image with empty alt]"}if(ka_img&&!ka_img.hasAttribute("alt"))return"[Image missing alt]";const ka_svg=ka_linkElement.querySelector(":scope > svg");if(ka_svg){const ka_svgInfo=ka_getSvgAccessibleName(ka_svg);if(ka_svgInfo.name&&ka_svgInfo.type!=="unclear")return ka_svgInfo.name;if(ka_svgInfo.type==="missing")return"[SVG role=img missing name]"}return"[Empty or non-text content]"}function ka_getSkipLinkStatus(ka_pageLang){const ka_result={found:!1,text:"",href:"",targetExists:!1,message:"No potential skip link found near the top of the page."},ka_potentialSkipLinks=Array.from(document.querySelectorAll("body > a[href^=\"#\"]:first-of-type, body > div:first-of-type a[href^=\"#\"]:first-of-type, body > :first-child a[href^=\"#\"]:first-of-type")).slice(0,5),ka_skipPhrases=ka_SKIP_LINK_TEXT[ka_pageLang]||ka_SKIP_LINK_TEXT.en;for(const ka_link of ka_potentialSkipLinks){const ka_linkText=(ka_link.textContent||"").trim().toLowerCase();if(ka_skipPhrases.some(ka_phrase=>ka_linkText.includes(ka_phrase))){ka_result.found=!0,ka_result.text=(ka_link.textContent||"").trim(),ka_result.href=ka_link.getAttribute("href");try{const ka_targetId=ka_result.href.substring(1);ka_result.targetExists=!!document.getElementById(ka_targetId)}catch(ka_e){ka_result.targetExists=!1}ka_result.message=ka_result.targetExists?`✅ Found potential skip link: "${ka_result.text}" targeting ${ka_result.href}. Target exists.`:`⚠️ Found potential skip link: "${ka_result.text}" targeting ${ka_result.href}. TARGET DOES NOT EXIST or has invalid ID!`;return ka_result}}ka_result.message="ℹ️ No link matching common skip link text found near the top of the page.";return ka_result}function ka_toggleAllStylesheets(ka_enable){console.log(`Kolla A11y: Toggling stylesheets ${ka_enable?"ON":"OFF"}`);document.querySelectorAll('link[rel="stylesheet"], style').forEach(ka_sheet=>{if(ka_sheet.id===ka_styleId)return;if(ka_enable){const ka_originalMedia=ka_sheet.getAttribute("data-original-media");if(ka_originalMedia!==null){ka_sheet.media=ka_originalMedia;ka_sheet.removeAttribute("data-original-media")}ka_sheet.disabled=!1;if(ka_sheet.media==="none")ka_sheet.media="all";ka_sheet.removeAttribute("disabled")}else{const ka_currentMedia=ka_sheet.getAttribute("media");if(ka_currentMedia&&ka_currentMedia.toLowerCase()!=="print"&&ka_currentMedia!=="none"){ka_sheet.setAttribute("data-original-media",ka_currentMedia)}else if(!ka_currentMedia&&!ka_sheet.hasAttribute("data-original-media")){ka_sheet.setAttribute("data-original-media","all")}ka_sheet.disabled=!0}})}function ka_activateTool(ka_toolName,ka_buttonElement){console.log(`Kolla A11y: Received activation request for: ${ka_toolName}`);const ka_isCurrentlyPressed=ka_buttonElement.getAttribute("aria-pressed")==="true";if(ka_toolName==="togglecss"){let ka_turnStylesOff=!ka_buttonElement.getAttribute("aria-pressed")==="true";console.log(`Kolla A11y: Toggling CSS. New state OFF = ${ka_turnStylesOff}`);ka_toggleAllStylesheets(!ka_turnStylesOff);ka_isCssToggledOff=ka_turnStylesOff;ka_buttonElement.setAttribute("aria-pressed",String(ka_turnStylesOff));if(ka_turnStylesOff&&ka_currentActiveTool){console.log(`Kolla A11y: CSS turned OFF. Deactivating current visual tool: ${ka_currentActiveTool}`);ka_deactivateTool(null)}return}if(ka_isCurrentlyPressed&&ka_toolName===ka_currentActiveTool){console.log(`Kolla A11y: Deactivating ${ka_toolName} by clicking again.`);ka_deactivateTool(null);return}console.log(`Kolla A11y: Activating new tool ${ka_toolName}. Current active: ${ka_currentActiveTool}`);if(ka_currentActiveTool&&ka_currentActiveTool!==ka_toolName){console.log(`Kolla A11y: Deactivating previous tool ${ka_currentActiveTool} before activating ${ka_toolName}.`);ka_deactivateTool(ka_toolName)}console.log(`Kolla A11y: Setting ${ka_toolName} button to pressed and running its function.`);ka_buttonElement.setAttribute("aria-pressed","true");ka_currentActiveTool=ka_toolName;switch(ka_toolName){case"headings":ka_runHeadingsCheck();break;case"images":ka_runImagesCheck();break;case"links":ka_runLinksCheck();break;case"landmarks":ka_runLandmarksCheck();break;case"focusable":ka_runFocusableCheck();break}console.log(`Kolla A11y: Activation finished for ${ka_toolName}.`)}function ka_createToolbar(){const ka_css=`#${ka_toolbarId}{all:initial;position:fixed;top:0;left:0;width:100%;box-sizing:border-box;z-index:2147483647;background-color:#333;color:#fff;padding:8px 12px;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";font-size:14px;line-height:1.5;display:flex;flex-wrap:wrap;gap:8px;align-items:center;border-bottom:1px solid #555;box-shadow:0 2px 5px rgba(0,0,0,.3);text-align:left}#${ka_toolbarId} *{box-sizing:border-box;font-family:inherit;font-size:inherit;line-height:inherit;color:inherit;margin:0;padding:0;border:0;background:none}#${ka_toolbarId} button{all:initial;display:inline-block;text-align:center;font-family:inherit;font-size:inherit;line-height:inherit;color:#fff;background-color:#555;border:1px solid #777;padding:5px 10px;cursor:pointer;border-radius:3px;transition:background-color .2s ease;white-space:nowrap}#${ka_toolbarId} button:focus-visible{outline:3px solid cyan!important;outline-offset:1px;box-shadow:0 0 0 3px rgba(0,150,255,.7)}#${ka_toolbarId} button:hover{background-color:#666}#${ka_toolbarId} button[aria-pressed=true]{background-color:#007bff;border-color:#0056b3;font-weight:bold}#${ka_toolbarId} button.${ka_prefix}-close{background-color:#dc3545;border-color:#bd2130;margin-left:auto;font-weight:bold;font-size:1.2em;padding:2px 8px;line-height:1}#${ka_toolbarId} button.${ka_prefix}-close:hover{background-color:#c82333}.${ka_prefix}-highlight-heading{outline:3px dashed magenta!important;outline-offset:2px;box-shadow:0 0 5px 2px rgba(255,0,255,.5)!important;background-color:rgba(255,0,255,.1)!important;scroll-margin-top:50px!important;position:relative}.${ka_prefix}-highlight-heading::before{content:var(--${ka_prefix}-heading-level,'?');position:absolute;top:-1.8em;left:-5px;background-color:magenta;color:#fff;font-size:10px;font-weight:bold;padding:2px 4px;border-radius:2px;z-index:1;line-height:1;font-family:sans-serif;display:inline-block;text-align:center;white-space:nowrap}.${ka_prefix}-visually-hidden{border:0!important;clip:rect(1px,1px,1px,1px)!important;height:1px!important;overflow:hidden!important;padding:0!important;position:absolute!important;width:1px!important;white-space:nowrap!important}#${ka_outputId}{all:initial;position:fixed;top:60px;right:10px;max-width:350px;max-height:70vh;overflow-y:auto;background-color:#fff;color:#111;border:1px solid #999;box-shadow:3px 3px 8px rgba(0,0,0,.3);padding:15px;z-index:2147483646;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";font-size:13px;line-height:1.6;border-radius:4px}#${ka_outputId} *{all:revert}#${ka_outputId} h3{margin:0 0 10px 0;padding-bottom:5px;font-size:1.1em;font-weight:bold;color:#333}#${ka_outputId} ul{list-style-type:none;padding-left:0;margin:0}#${ka_outputId} li{padding-left:calc((var(--level, 1) - 1) * 20px);margin-bottom:4px;white-space:normal}#${ka_outputId} .kolla-a11y-heading-level{display:inline-block;width:25px;font-weight:bold;color:#555}#${ka_outputId} .kolla-a11y-heading-text{cursor:pointer;text-decoration:none;color:#005a9c}#${ka_outputId} .kolla-a11y-heading-text:hover{text-decoration:underline}#${ka_outputId} .kolla-a11y-issue{font-weight:bold;color:red;margin-left:8px;font-size:.9em}#${ka_outputId} li.${ka_prefix}-heading-error{background-color:#ffebee;border-left:3px solid #e57373;padding-left:calc((var(--level, 1) - 1) * 20px + 5px);margin-left:-8px;padding-right:5px;margin-right:-5px;border-radius:3px}#${ka_outputId} li.${ka_prefix}-heading-error .kolla-a11y-issue{color:#c62828}.${ka_prefix}-panel-close-btn{all:initial;font-family:inherit;font-size:1.6em;line-height:1;color:#666;background:0 0;border:none;padding:0 5px;cursor:pointer;border-radius:3px}.${ka_prefix}-panel-close-btn:hover{color:#111;background-color:#ddd}.${ka_prefix}-panel-close-btn:focus-visible{outline:2px solid #005a9c;outline-offset:2px}.${ka_prefix}-filter-group{all:revert;border:1px solid #ccc;padding:5px 10px 8px 10px;margin:0 0 10px 0;display:block;border-radius:3px}.${ka_prefix}-filter-group legend{font-size:0.9em;font-weight:bold;padding:0 5px}.${ka_prefix}-filter-group label{margin-right:15px;font-size:0.95em;cursor:pointer;display:inline-flex;align-items:center}.${ka_prefix}-filter-group input[type=radio]{margin-right:5px;position:relative;top:-1px}.${ka_prefix}-hidden-info{font-style:italic;color:#757575;margin-left:8px;font-size:0.9em}.${ka_prefix}-highlight-image,.${ka_prefix}-highlight-svg{outline-offset:3px;position:relative;scroll-margin-top:50px!important}.${ka_prefix}-highlight-image::before,.${ka_prefix}-highlight-svg::before{content:var(--${ka_prefix}-img-status,'?');position:absolute;top:-1.5em;left:-5px;color:#fff;font-size:10px;font-weight:bold;padding:2px 4px;border-radius:2px;z-index:1;line-height:1;font-family:sans-serif;white-space:nowrap;text-align:center;min-width:2em;display:inline-block}.${ka_prefix}-highlight-image-alt-present::before{background-color:#4CAF50}.${ka_prefix}-highlight-image-alt-empty::before{background-color:#ff9800}.${ka_prefix}-highlight-image-alt-missing::before{background-color:#f44336}.${ka_prefix}-highlight-svg-named::before{background-color:#4CAF50}.${ka_prefix}-highlight-svg-decorative::before{background-color:#ff9800}.${ka_prefix}-highlight-svg-missing::before{background-color:#f44336}.${ka_prefix}-highlight-svg-unclear::before{background-color:#9e9e9e}.${ka_prefix}-highlight-svg-hidden::before{background-color:#9e9e9e}.${ka_prefix}-highlight-image{outline:3px dashed #007bff!important;position:relative;scroll-margin-top:50px!important}.${ka_prefix}-highlight-svg{outline:3px dashed #ff9800!important;position:relative;scroll-margin-top:50px!important}#${ka_outputId} .kolla-a11y-image-item{display:flex;align-items:flex-start;margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid #ddd}#${ka_outputId} .kolla-a11y-image-preview{flex:0 0 50px;height:50px;margin-right:10px;background-color:#eee;display:flex;align-items:center;justify-content:center;overflow:hidden;border:1px solid #ccc;cursor:pointer}#${ka_outputId} .kolla-a11y-image-preview img,#${ka_outputId} .kolla-a11y-image-preview svg{max-width:100%;max-height:100%;display:block}#${ka_outputId} .kolla-a11y-image-info{flex:1;font-size:.95em}#${ka_outputId} .kolla-a11y-image-info strong{color:#333;font-weight:bold}#${ka_outputId} .kolla-a11y-image-alt,#${ka_outputId} .kolla-a11y-svg-name{display:block;margin-top:2px;padding:3px 5px;background-color:#e9e9e9;border-radius:3px;word-wrap:break-word}#${ka_outputId} .kolla-a11y-image-alt.${ka_prefix}-heading-error,#${ka_outputId} .kolla-a11y-svg-name.${ka_prefix}-heading-error{background-color:#ffebee!important;border:1px solid #e57373}#${ka_outputId} .kolla-a11y-image-info .kolla-a11y-issue{display:block;margin-top:4px;font-size:.9em}#${ka_outputId} .kolla-a11y-image-src{font-size:.85em;color:#555;margin-top:4px;word-break:break-all}#${ka_outputId} .kolla-a11y-info-header{font-size:.9em;margin-bottom:15px;padding-bottom:5px;border-bottom:1px dashed #ccc;color:#444;display:block!important}.${ka_prefix}-no-src-preview{font-size:0.8em;color:#777;text-align:center}.${ka_prefix}-highlight-link,.${ka_prefix}-highlight-link-issue{outline:3px dashed #4CAF50!important;outline-offset:2px;position:relative;scroll-margin-top:50px!important}.${ka_prefix}-highlight-link-issue{outline-color:#ff9800!important;box-shadow:0 0 5px 2px rgba(255,152,0,.5)!important;background-color:rgba(255,152,0,.1)!important}.${ka_prefix}-highlight-link::before,.${ka_prefix}-highlight-link-issue::before{content:var(--${ka_prefix}-link-status,'LINK');position:absolute;top:-1.5em;left:-5px;color:#fff;font-size:10px;font-weight:bold;padding:2px 4px;border-radius:2px;z-index:1;line-height:1;font-family:sans-serif;white-space:nowrap;text-align:center;min-width:2em;display:inline-block;background-color:#4CAF50}.${ka_prefix}-highlight-link-issue::before{background-color:#ff9800}#${ka_outputId} .${ka_prefix}-link-item{margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid #ddd}#${ka_outputId} .${ka_prefix}-link-text{display:block;margin-bottom:3px;font-weight:bold;word-wrap:break-word;cursor:pointer;color:#005a9c}#${ka_outputId} .${ka_prefix}-link-text:hover{text-decoration:underline}#${ka_outputId} .${ka_prefix}-link-href{font-size:.85em;color:#555;word-break:break-all}#${ka_outputId} .${ka_prefix}-link-item .${ka_prefix}-issue{display:block;margin-top:4px;font-size:.9em}#${ka_outputId} .${ka_prefix}-link-item.${ka_prefix}-heading-error{background-color:#fff3e0;border-left:3px solid #ffcc80;padding-left:5px;margin-left:-8px;padding-right:5px;margin-right:-5px;border-radius:3px}#${ka_outputId} .${ka_prefix}-link-item.${ka_prefix}-heading-error .${ka_prefix}-issue{color:#e65100}#${ka_outputId} .${ka_prefix}-skip-link-info{padding:10px;margin-bottom:15px;border:1px solid #ccc;border-radius:3px;background-color:#f9f9f9;font-size:.95em}#${ka_outputId} .${ka_prefix}-skip-link-info strong{display:block;margin-bottom:5px}#${ka_outputId} .${ka_prefix}-skip-link-info .${ka_prefix}-issue{margin-left:0;font-size:1em}.${ka_prefix}-highlight-landmark{outline:3px dashed #FFC107!important;outline-offset:2px;box-shadow:0 0 5px 2px rgba(255,193,7,.5)!important;background-color:rgba(255,193,7,.05)!important;scroll-margin-top:50px!important;position:relative}.${ka_prefix}-highlight-landmark::before{content:var(--${ka_prefix}-landmark-role,'LM');position:absolute;top:-1.5em;left:-5px;background-color:#FFC107;color:#000;font-size:10px;font-weight:bold;padding:2px 4px;border-radius:2px;z-index:1;line-height:1;font-family:sans-serif;white-space:nowrap;text-align:center;min-width:2em;display:inline-block;text-transform:uppercase}#${ka_outputId} .${ka_prefix}-landmark-item{margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid #ddd}#${ka_outputId} .${ka_prefix}-landmark-role{display:block;font-weight:bold;margin-bottom:2px;text-transform:capitalize;cursor:pointer}#${ka_outputId} .${ka_prefix}-landmark-role:hover{text-decoration:underline}#${ka_outputId} .${ka_prefix}-landmark-name{font-size:.9em;color:#333;margin-bottom:4px;display:block;padding:2px 4px;background-color:#eee;border-radius:2px;word-wrap:break-word}#${ka_outputId} .${ka_prefix}-landmark-element{font-size:.85em;color:#666;font-family:monospace}#${ka_outputId} .${ka_prefix}-landmark-item .${ka_prefix}-issue{display:block;margin-top:4px;font-size:.9em}#${ka_outputId} .${ka_prefix}-landmark-item.${ka_prefix}-heading-error{background-color:#ffebee;border-left:3px solid #e57373;padding-left:5px;margin-left:-8px;padding-right:5px;margin-right:-5px;border-radius:3px}#${ka_outputId} .${ka_prefix}-landmark-item.${ka_prefix}-heading-error .${ka_prefix}-issue{color:#c62828}#${ka_outputId} .${ka_prefix}-landmark-warning{background-color:#fff3e0;border:1px solid #ffcc80;padding:10px;margin-bottom:15px;border-radius:3px;font-weight:bold;color:#e65100}`;const ka_styleElement=document.createElement("style");ka_styleElement.id=ka_styleId;ka_styleElement.textContent=ka_css;document.head.appendChild(ka_styleElement);const ka_toolbarElement=document.createElement("div");ka_toolbarElement.id=ka_toolbarId;ka_toolbarElement.setAttribute("role","toolbar");ka_toolbarElement.setAttribute("aria-label","Kolla A11y Accessibility Tools");ka_toolbarElement.innerHTML=`<button data-tool="headings" aria-pressed="false">Headings</button><button data-tool="images" aria-pressed="false">Images</button><button data-tool="links" aria-pressed="false">Links</button><button data-tool="landmarks" aria-pressed="false">Landmarks</button><button data-tool="focusable" aria-pressed="false">Focusable</button><button data-tool="togglecss" aria-pressed="false">Toggle CSS</button><button class="${ka_prefix}-close" aria-label="Close Kolla A11y Toolbar">×</button>`;document.body.appendChild(ka_toolbarElement);ka_toolbarElement.addEventListener("click",function(ka_event){const ka_target=ka_event.target;if(ka_target.tagName==="BUTTON"){if(ka_target.classList.contains(`${ka_prefix}-close`)){ka_cleanupAll()}else{const ka_tool=ka_target.getAttribute("data-tool");if(ka_tool){ka_activateTool(ka_tool,ka_target)}}}});const ka_firstButton=ka_toolbarElement.querySelector("button");if(ka_firstButton){ka_firstButton.focus()}console.log("Kolla A11y: Toolbar created.")}const ka_existingToolbarCheck=document.getElementById(ka_toolbarId);if(ka_existingToolbarCheck){console.log("Kolla A11y: Toolbar exists. Cleaning up.");ka_cleanupAll()}else{console.log("Kolla A11y: Toolbar not found. Creating.");ka_createToolbar()}})();
